<!DOCTYPE html>
<html lang="fr-fr">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Abdelmajid OUMNAD" name="author">
    <meta content="Tutoriel Arduino" name="description">
    <meta content="ARDUINO, Serial, LCD, I2C, Moteur pas à pas, stepper, Moteur CC, Motor CC, Matlab, Python, TKinter"
        name="keywords">
    <title>Intro Arduino</title>
    <link rel="icon" href="IMAGES/JPC_logo.png" type="image/png">
    <link rel="stylesheet" href="../styles.css">
    <script src="../scripts.js" defer></script>
</head>

<body>
    <div class="TwoPanPageContainer">
        <div id="LeftPanel_ID" class="LeftPanel">
            <div class="LeftPanelHeader">
                <img src="../IMAGES/x3.png" id="XIcon" class="xicon Burger">
                <a href="../index.html"> <img src="../IMAGES/home48.png" alt=""> </a>
                <a href="Android.html"> <img src="IMAGES/JPC-logo.jpg" height="45px"> </a>
            </div>
            <div id="LeftPanelMenu_ID" class="LeftPanelMenu">
                <a href="#INTRO">
                    <h2>Introduction</h2>
                </a>
                <a href="#BASICS">
                    <h2>Notions de base</h2>
                </a>
                <div class="rubrique" onclick="toggleMenu('androidstudio', this)">
                    <span>&gt;</span>
                    <h2>Android Studio</h2>
                </div>
                <div id="androidstudio" class="sub-rubrique">
                    <a href="#AS">
                        <h3>Présentation</h3>
                    </a>
                    <a href="#ASPROJECT">
                        <h3>Créer un projet</h3>
                    </a>
                    <a href="#DEBUG">
                        <h3>Tester le projet</h3>
                    </a>
                </div>
            </div>
        </div>
        <!-- ################################################################################################################ -->
        <div class="RightPanel">
            <div class="RightPanelHeader"> <img onclick="montrerMenu()" class="Burger CursorPointer"
                    src="IMAGES/menu48.png" alt="">
                <h1>Jetpack Compose pour Débutant</h1>
            </div>
            <div class="RightPanelContent">




                <!-- ################################################################################################ -->
                <h2 id="INTRO">Introduction</h2>
                <p>Jetpack Compose est une boîte à outils moderne conçue pour créer des applications Android en
                    utilisant le langage de programmation Kotlin. Contrairement aux approches précédentes, où
                    l'interface utilisateur était définie en XML et le code de logique en Java, Jetpack Compose
                    centralise tout le processus dans Kotlin, simplifiant ainsi le développement.</p>
                <p>Avec Jetpack Compose, les interfaces utilisateur sont construites en utilisant des fonctions
                    composables, qui sont des blocs de code réutilisables permettant de créer des éléments d'interface
                    tels que des boutons, des champs de saisie, des cases à cocher, et bien plus encore. Ces fonctions
                    composables rendent le code plus lisible et modulaire, facilitant la gestion et la mise à jour de
                    l'UI.</p>
                <p>Une caractéristique clé de Jetpack Compose est la gestion de l'état et la recomposition automatique.
                    Les éléments de l'interface sont automatiquement redessinés en réponse aux changements d'état grâce
                    à une gestion efficace des variables d'état. En Kotlin, les variables de type <i>mutableState</i>
                    permettent de suivre les changements dans l'état de l'application. Lorsqu'une variable de ce type
                    est modifiée, les composables qui dépendent de cette variable sont automatiquement rafraîchis pour
                    refléter les mises à jour. Cela simplifie la création d'interfaces dynamiques et réactives, tout en
                    réduisant le besoin de gestion manuelle du cycle de vie de l'interface utilisateur</p>
                <p>Jetpack Compose offre également une intégration fluide avec les autres composants de l'écosystème
                    Android, ainsi que des outils puissants pour personnaliser et optimiser les performances de
                    l'interface utilisateur, ce qui en fait un choix attrayant pour les développeurs Android cherchant à
                    créer des expériences utilisateur modernes et performantes.</p> <br>

                <!-- ################################################################################################ -->
                <h2 id="BASICS">Notions de base</h2>
                <p>Nous allons examiner un bout de code minimaliste qui va nous permettre de prendre contact avec les
                    <b><i>composables</i></b>, les variables de type <b><i>mutableState</i></b> et la notion de
                    <b><i>recomposition</i></b>


                <pre><code>    var taillexy by remember { mutableStateOf(20) }
    Column {
        Box( modifier = Modifier
            .size(taillexy.dp, taillexy.dp)
            .background(Color.Magenta)
        )
        Button( onClick = { taillexy += 10 } )
        {
            Text(text = "Agrandir")
        }
    }</code></pre>
                </p><br>
                <p>Cce bout de code est constitué d'une variable et de trois composables:</p>
                <ul>
                    <li><em>var taillexy by remember { mutableStateOf(20)}</em></li>
                    C'est la déclaration de la variable <i>taillexy</i>. C'est une syntaxe un peu particulière. Pour
                    l'instant nous allons nous focaliser sur les ponts suivants:
                    <ul>
                        <li><b><i>by :</i></b> Cet opérateur est utilisé pour déléguer une valeur à une variable. Pour
                            l'instant,
                            considérez-le comme une manière différente de faire une affectation <b>'='</b>. Ici, la
                            variable
                            taillexy est initialisée à 20.
                        </li>
                        <li><b><i>remember :</i></b> Cet opérateur indique que la variable conserve sa valeur même si le
                            code est
                            réexécuté. Contrairement à une variable ordinaire, elle ne revient pas à 20, même après une
                            recomposition. C'est un peu similaire au mot clé <i>static </i> en langage C/C++</li>
                        <li><b><i>mutableStateOf</i></b> signifie que cette variable est liée à un état de
                            l'interface utilisateur l'UI. Si sa valeur change, l'UI sera recomposée automatiquement pour
                            refléter le nouvel état</li>
                    </ul>
                    <li><em>Column( paramètres ) { contenu }</em></li>
                    <b>Column </b>est composable de type <b>conteneur</b>. Les composables fils qui seront placé dedans
                    sont répartis
                    verticalement l'un en dessous de l'autre.
                    <ul>
                        <li>Entre ( ), on place les propriétés comme la taille, la couleur, la façon dont les fils
                            seront
                            répartis et alignés etc... <br>
                            Dans, l'exemple, on a omis les (), la colonne prendra les paramètres par défaut
                        </li>
                        <li>Ente { }, on place les fils de la colonne. Dans l'exemple, on a placé deux composables, un
                            <b>Box </b> et un <b>Button</b>
                        </li>
                    </ul>
                    <li><em>Box( paramètres ) { contenu }</em> </li>
                    <b>Box </b> est un conteneur de type 'Boite rectangulaire'. Ici on ne va rien mettre dedans d'où
                    l'absence des {} <br>
                    Il utilise un seul paramètre : <b><i>modifier</i></b> <br>
                    Le paramètre <b>modifier</b> peut prendre plusieurs options. Ici il en a deux :
                    <ul>
                        <li><b><i>Modifier.size(taillexy.dp, taillexy.dp)</i></b> définit la largeur et la hauteur du
                            Box. Ici on utilise notre variable <i>taillexy</i>. Au démarrage de l'application le Box
                            aura une taille de 20.dp x 20.dp ( l'unité <b>dp</b> correspond à la densité de pixel)</li>
                        <li><b><i>Modifier.background(Color.Magenta)</i></b> Couleur du Box</li>
                    </ul>
                    <li><em>Button( paramètres ) { contenu }</em> </li>
                    C'est un simple bouton. Il a un seul paramètre et il contient le texte "Agrandir", tout le reste est
                    par défaut <br>
                    Le paramètre <b>onClick</b> définit ce qui se passe quand on clique sur le bouton. A chaque clic, la
                    fonction lambda <b>{ taillexy += 10 } </b> est exécutée. Cette fonction ajoute 10 à la variable
                    <i>taillexy. <br>
                        <b><i>Comme c'est une variable d'état, le système détecte son changement et déclenche la
                                recomposition de l'UI. Il en résulte que le composable Box est redessiné avec ses
                                nouvelles dimensions</i></b>
                    </i>
                </ul><br>
                <video controls class="BlocCenter w200">
                    <source src="IMAGES/Recomposition.mp4" type="video/mp4">
                </video><br>
                <p>Voici le code entier. Si vous voulez l'essayer, créer un nouveau projet. Replacer le contenu de votre
                    MainActivity par le code ci-dessous. Dans la première ligne, remplacez composebasics par le nom de
                    votre projet (minuscule)
                </p><br>
                <!-- =========================== Code ========================================================= -->
                <div class="CodeAreaContainer">
                    <div class="CodeAreaHeader">Concepts de base<button class="CopyBtn"
                            onclick="CopyCode(this)">Copier</button> </div>
                    <pre><code>package com.example.composebasics

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.size
import androidx.compose.material3.Button
import androidx.compose.material3.Text
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableIntStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.unit.dp

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            var boxsize by remember { mutableIntStateOf(20) }
            Column {
                Box( modifier = Modifier
                    .size(boxsize.dp, boxsize.dp)
                    .background(Color.Magenta)
                )
                Button( onClick = { boxsize += 10 } )
                {
                    Text(text = "Agrandir")
                }
            }
        }
    }
}
</code></pre>
                </div><br>
                <!-- ============================= Fin Code ================================================ -->

                <!-- ################################################################################################ -->
                <h2 id="AS">Android Studio</h2>
                <img src="IMAGES/AndroidStudioLogo.jpg" class="w200">
                <p>Android Studio est l'environnement de développement intégré (IDE) officiel pour le développement
                    d'applications Android. Basé sur IntelliJ IDEA, il offre une suite complète d'outils pour écrire,
                    tester, déboguer et optimiser des applications Android. Il inclut un éditeur de code performant, un
                    émulateur intégré de téléphones et tablettes android (et bien plus encore).</p>
                <p>Android Studio est un gros <i>pavé</i>, il faut une bonne liaison Internet pour l'installer et un bon
                    PC pour le faire tourner correctement.</p>
                <img src="IMAGES/AS_IDE.jpg"><br>
                <h3 id="ASPROJECT">Créer un projet Android Studio</h3>
                <p>On trouve sur Internet plein de vidéos pour vous aider à commencer avec Android Studio</p>
                <p>Pour commencer un nouveau projet:</p>
                <ul>
                    <li><em>New Project</em> &rarr; On obtient une fenêtre pour sélectionner le type de projet</li>
                    <li>Choisir <em>Empty Activity</em> Jetpack Compose</li>
                    <img src="IMAGES/EmptyActivityJPC.jpg" class="w200">
                    <li>On obtient la fenêtre ci-dessous</li>
                    <img src="IMAGES/NewProjectScrn.jpg">
                    <ul>
                        <li>Donner un nom à votre projet</li>
                        <li>Vérifier que l'emplacement où il sera stocké vous convient</li>
                        <li>Choisir la version Android minimale pour faire tourner votre application</li>
                        <li>Terminer par le bouton <em>Finish</em></li>
                    </ul>
                    <li>Si vous avez ce pop-up, pas de panique, l'IDE vous indique que Microsoft Defender est actif et
                        il va ralentir le travail sur le projet. Cliquez sur <b>Automatically</b> pour exclure ce projet
                        de Microsoft Defender</li>
                    <img src="IMAGES/MSdefender.jpg">
                    <li>Android Studio ne démarre pas un projet réellement vide mais crée un exemple dy type "Hello
                        World!". L'IDE affiche dans la barre d'état les opérations qu'il est en train
                        d'effectuer sur le projet. Quand tout est terminé, vous pouvez le voir en haut à droite de
                        l'écran</li>
                    <img src="IMAGES/ItsOk.jpg">
                </ul>
                <p>Maintenant, on peut commencer à toucher à notre projet et le tester</p><br>
                <h3 id="DEBUG">Tester le projet</h3>
                <p>On a 3 façons pour tester et débeuguer un projet</p>
                <ol>
                    <li><b>Sur un vrai téléphone: </b>C'est la méthode qui marche bien, Pour y arriver il faut effectuer
                        les étapes ci-dessous:
                        <ul>
                            <li>
                                <b>Activer le mode développeur sur votre téléphone :</b><br> Allez dans les Paramètres
                                &rarr; À
                                propos du téléphone &rarr; cliquez 7 fois fois sur <i>Numéro de build</i>
                            </li>
                            <li><b>Activer le débogage USB :</b><br>
                                Dans les paramètres, chercher <i>Options développeur</i> et activez Débogage USB.</li>
                            <li><b>Connecter le téléphone via USB à votre ordinateur</b><br>
                                Acceptez la demande de débogage USB sur votre téléphone.
                            </li>
                            <li>Votre téléphone apparaît dans la barre d'outils Android Studio, Cliquez sur le bouton
                                <i>play</i> &#x25B6;, <br>
                                L'étape <i>"Gradle buid running"</i> peut durer assez longtemps, ne soyez pas trop
                                pressé
                                <img src="IMAGES/DebugOnDevice.jpg">
                            </li>
                            <li>Maintenant, vous pouvez modifier votre appli et cliquer sur le bouton Run app,
                                l'actualisation est plus rapide
                                <img src="IMAGES/DebugRestart.jpg">
                            </li>
                        </ul>
                    </li>
                    <li><b>Sur un Émulateur: </b> Cette méthode est très gourmande en ressource processeur, elle
                        nécessite un très bon PC
                        <ul>
                            <li>Cliquer sur Devices manager à droite de l'écran <img src="IMAGES/DeviceManager.jpg"
                                    class="inline">
                            </li>
                            <li>Cliquer sur "+" &rarr; <i>Create virtual device</i>
                                <img src="IMAGES/CreateNewDevice.jpg">
                            </li>
                            <li>Vous allez avoir plusieurs choix. Sur mon vieux PC (I5), le <i>Pixel 6a</i> avec l'OS
                                <i>Android 10</i> (API 29) marche assez bien
                            </li>
                            <li>Maintenant démarrer votre téléphone virtuel
                                <img src="IMAGES/EmulatorStart.jpg">
                            </li>
                            <li>Attendez que votre que votre <i>Virtual Device</i> soit démarré. La première fois ça
                                peut prendre pas mal de temps. Si pour une raison ou une autre, l'émulateur se plante
                                et que vous n'arrivez pas à l'arreter, allez dans le gestionnaire des taches et arreter
                                le process <i>adb</i>
                                <img src="IMAGES/Emulator.jpg">
                            </li>
                            <li>Maintenant que l'émulateur est démarré, lancer votre application
                                <img src="IMAGES/ApplicationStart.jpg">
                            </li>
                            <li>Vous devez voir quelque chose de ce genre,
                                <img src="IMAGES/AppOnEmulator.jpg">
                            </li>
                            <li>Si vous voulez déplacer l'émulateur dans l'écran, il faut modifier le mode de
                                visualisation. Mois je préfère le faire flotter par dessus le contenu de l'écran. Dans
                                la barre d'outils de <i>Running Devices</i>, Cliquez sur les trois ponts &rarr; View
                                Mode &rarr; Float</li>
                            <li>Maintenant vous pouvez modifier votre appli et actualiser
                                <img src="IMAGES/AppRestart.jpg" alt=""><br>
                                Vous pouvez par exemple l'alléger et ne garder que ce que l'on maîtrise à notre niveau
                                d'apprentissage. <br><br>
                                <pre><code>package com.example.monprojet

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.unit.sp

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MonApp()
        }
    }
}

@Composable
fun MonApp() {
    Text(
        text = "Hello World!",
        fontSize = 30.sp
    )
}

</code></pre><br>
                            </li>
                            <li>Quand vous avez terminé, je vous conseille de:
                                <ul>
                                    <li>Fermer l'application <img src="IMAGES/AppStop.jpg" class="inline"></li>
                                    <li>Cacher le panneau <i>Running Devices</i> <img src="IMAGES/RunDevices.jpg"
                                            class="inline"></li>
                                    <li>Arrêter l'émulateur <img src="IMAGES/EmulatorStop.jpg" class="inline">
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li><br>
                    <li><b>Prévisualiser votre UI:</b> C'est assez pratique mais il y a du bon et du moins bon. Cés à
                        vous de juger.
                        <ul>
                            <li>Les modification du code sont mises à jour automatiquement dans la @preview (Live Edit)
                            </li>
                            <li>L'UI ne s'affiche pas exactement comme sur un téléphone</li>
                            <li>Par défaut, on ne peut pas interagir avec l'application (cliquer sur des boutons etc
                                ...)</li>

                            <li>Pour la mettre en œuvre il faut ajouter un <i>@preview</i> dans lequel on place une
                                fonction composable qui affiche la totalité ou une partie de notre UI. On peut créer
                                plusieurs preview
                                <pre><code>package com.example.monprojet

                                import android.os.Bundle
                                import androidx.activity.ComponentActivity
                                import androidx.activity.compose.setContent
                                import androidx.compose.material3.Text
                                import androidx.compose.runtime.Composable
                                import androidx.compose.ui.tooling.preview.Preview
                                import androidx.compose.ui.unit.sp
                                
                                class MainActivity : ComponentActivity() {
                                    override fun onCreate(savedInstanceState: Bundle?) {
                                        super.onCreate(savedInstanceState)
                                        setContent {
                                            MyApp()
                                        }
                                    }
                                }
                                
                                @Composable
                                fun MyApp() {
                                    Text(
                                        text = "Hello World!",
                                        fontSize = 30.sp
                                    )
                                }
                                <em>
                                @Preview(showBackground = true)
                                @Composable
                                fun MyPreview() {
                                        MyApp()
                                }
                            </em>
                                </code></pre>
                            </li>
                            <li>On a trois mode de visualisation: Code seul, code est Preview, Preview seule
                                <img src="IMAGES/Preview.jpg" alt="">
                            </li>
                            <li>Consultez la documentation pour voir toutes les possibilités du mode @preview</li>

                        </ul>
                    </li>
                </ol>






                <br><br><br>
            </div>
        </div>
    </div>
</body>

</html>